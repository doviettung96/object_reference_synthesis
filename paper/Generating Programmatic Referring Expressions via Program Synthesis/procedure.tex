\begin{algorithm}[t]
\begin{algorithmic}
\FUNCTION{SynthesizeProgram($G$)}
\STATE Initialize $Q$-network $Q_{\theta}$ with pretrained parameters $\theta^0$
\FOR{$i\in\{1,...,N\}$}
\STATE Sample program $P$ of length $M$ according to $Q_{\theta}$
\IF{$\rrp{G}{P}$}
\STATE \textbf{return} $P$
\ENDIF
\STATE Update $Q_{\theta}$ using deep $Q$ learning
\ENDFOR
\STATE Get best length $M-K$ program $P^0$ according to $Q_{\theta}$
\FOR{Programs $P$ of length $K$}
\IF{$\rrp{G}{P^0\wedge P}$}
\STATE \textbf{return} $P^0\wedge P$
\ENDIF
\ENDFOR
\STATE \textbf{return} $\varnothing$
\ENDFUNCTION
\end{algorithmic}
\caption{Our algorithm for synthesizing referring relational programs. Hyperparameters are $N,M,K\in\mathbb{N}$.}
\label{alg:synth}
\end{algorithm}